<!DOCTYPE html>
<html>
  <head>
        <title>Solar Panel AR Animation</title>
        <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
        <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  </head>
  <body style="margin: 0; overflow: hidden;">
        <a-scene embedded arjs>
          <!-- Marker -->
          <a-marker preset="hiro">
            <!-- Solar panel box -->
            <a-box id="panel" position="0 0.5 0" depth="0.1" height="0.05" width="1"
                   color="orange"></a-box>
          </a-marker>
          <a-entity camera></a-entity>
        </a-scene>


        <script>
          // JSON URL from Google Drive
          const json_url = "https://drive.google.com/uc?export=download&id=1V5W-CETyFu0NCthx8-trnbGPMxC14Aoc";


          // Animation speed (ms per hour)
          const stepDuration = 1000;  // 1 second per tilt update


          fetch(json_url)
            .then(response => response.json())
            .then(data => {
              const panel = document.querySelector("#panel");
              let i = 0;


              function updateTilt() {
                if (i >= data.length) i = 0;  // loop over the day
                const tilt = data[i].tilt;
                // Rotate around X-axis (tilt * 90 degrees)
                panel.setAttribute("rotation", tilt * 90 + " 0 0");
                i++;
                setTimeout(updateTilt, stepDuration);
              }


              updateTilt();  // start animation
            })
            .catch(err => console.error(err));
        </script>
  </body>
</html>
